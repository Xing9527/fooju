<template>    <div class="vue-zoom-container" v-scale="{options: currentOptions,url: minUrl}" ref="scaleBox">        <div class="vue-zoom-min-box _leftBox" >            <img src="/imgs/pic1.png"  class="_minPic">            <div class="_vue-mask" @click="handleClick"></div>        </div>        <div class="vue-zoom-max-box _rightBox"  >            <img src="/imgs/pic1.png" class="_maxPic">        </div>    </div></template><script>    export default {        name: "myZoom",        props: {            options: {                type: Object            },            minUrl: {                type: String            }        },        data() {            return {                currentOptions: this.options,                currentUrl: this.minUrl            }        },        methods: {            handleClick() {                // console.log(this.minUrl)            }        },        directives: {            scale: {                inserted(el,binding,vnode){                    console.log(binding.value)                    let leftBox = el.querySelector("._leftBox");                    let minPic = el.querySelector("._minPic");                    let mask = el.querySelector("._vue-mask");                    let maxPic = el.querySelector("._maxPic");                    let rightBox = el.querySelector("._rightBox");                    maxPic.src = minPic.src = binding.value.url;                    function mouseIn(ev) {                        ev = ev || event;                        document.addEventListener("mousemove",mouseMove)                        leftBox.addEventListener("mouseleave",mouseLeave)                    }                    function mouseMove(ev){                        ev = ev || event;                        let scrollTop = document.documentElement.scrollTop || document.body.scrollTop;                        let computedLeft = ev.clientX - el.offsetLeft - mask.offsetWidth/2;                        let computedTop = ev.clientY - el.offsetTop + scrollTop - mask.offsetHeight/2;                        let limitLeft = leftBox.offsetWidth-mask.offsetWidth;                        let limitTop = leftBox.offsetHeight-mask.offsetHeight                        mask.style.display = "block";                        if(computedLeft<0){                            computedLeft = 0;                        }                        else if(computedLeft>limitLeft){                            computedLeft = limitLeft                        }                        if(computedTop<0){                            computedTop = 0;                        }                        else if (computedTop>limitTop){                            computedTop = limitTop;                        }                        mask.style.top = computedTop + "px";                        mask.style.left = computedLeft + "px";                        rightBox.style.display = "block";                        maxPic.style.transform= `translate3d(${-computedLeft*2.5}px,${-computedTop*2.5}px,0)`                    }                    function mouseLeave(ev) {                        ev = ev || event;                        document.removeEventListener("mousemove", mouseMove)                        mask.style.display = "none";                        rightBox.style.display = "none"                    }                    el._move = mouseMove;                    el._in = mouseIn;                    el._leave = mouseLeave;                    leftBox.onmouseenter = mouseIn                },                unbind(el,binding,vnode){                    let leftBox = el.querySelector("._leftBox");                    let minPic = el.querySelector("._minPic");                    let mask = el.querySelector("._vue-mask");                    let maxPic = el.querySelector("._maxPic");                    let rightBox = el.querySelector("._rightBox");                    leftBox.removeEventListener("mouseenter",el._in);                }            }        },        watch: {            options(val,old) {                this.currentOptions = val;                console.log(this)            },            minUrl(val) {                this.currentUrl = val;            }        }    }</script><style>    .vue-zoom-container {        position: relative;    }    .vue-zoom-min-box {        position: relative;        width: 592px;        height: 442px;        overflow: hidden;    }    .vue-zoom-min-box img {        display: block;        width: 100%;        height: 100%;    }    ._vue-mask {        position: absolute;        cursor: move;        width: 237px;        height: 216px;        background: rgba(255,255,0,.2);    }    .vue-zoom-max-box {        display: none;        position: absolute;        left: 55%;        top: 0;        width: 592px;        height: 542px;        overflow: hidden;    }    .vue-zoom-max-box img{        display: block;        width: 1480px;        height: 1105px    }</style>